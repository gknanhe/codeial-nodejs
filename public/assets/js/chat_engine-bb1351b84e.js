class ChatEngine{constructor(e,s){this.chatBox=$(`#${e}`),this.userEmail=s,this.socket=io.connect("http://localhost:2000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;function s(){var e=$("#chat-messages-list");e.animate({scrollTop:e.prop("scrollHeight")},500)}this.socket.on("connect",(function(){console.log("connection established using sockets....!"),e.socket.emit("join_room",{user_email:e.userEmail,chatroom:"codeial"}),e.socket.on("user_joined",(function(e){console.log("a user joined!",e)}))})),$("#send-message").click((function(){let c=$("#chat-message-input").val();""!=c&&e.socket.emit("send_message",{message:c,user_email:e.userEmail,chatroom:"codeial"}),$("#chat-message-input").val(""),s()})),e.socket.on("receive_message",(function(c){let t=$("<li>"),i="other-message";c.user_email==e.userEmail&&(i="self-message");let l=function(e){const s=e.indexOf("@");return-1!==s?e.slice(0,s):e}(c.user_email);t.append($("<span>",{html:c.message})),t.append($("<sub>",{html:l})),t.addClass(i),$("#chat-messages-list").append(t),s()}))}}$("#chat-circle").click((function(){$("#chat-circle").toggle("scale"),$(".chat-box").toggle("scale"),$("#chat-circle").is(":visible")?$("#chat-circle ").css("display","flex"):$("#chat-circle ").css("display","none")})),$(".chat-box-toggle").click((function(){$("#chat-circle").toggle("scale"),$(".chat-box").toggle("scale"),$("#chat-circle").is(":visible")?$("#chat-circle ").css("display","flex"):$("#chat-circle ").css("display","none")}));