{let t=function(){let t=$("#new-post-form");t.submit((function(o){o.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:t.serialize(),success:function(t){let o=n(t.data.post);$("#post-list-container").prepend(o),e($(" .delete-post-button",o)),new PostComments(t.data.post._id),new ToggleLike($(" .toggle-like-button",o)),new Noty({theme:"relax",text:"Post published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}}),document.getElementById("form-input").value=""}))},n=function(t){return $(`<div class="postContainer" id="post-${t._id}" key="{post._id}">\n    <div class="postWrapper">\n      <div class="postHeader">\n        <div class="postAvatar">\n          <div>\n            <img\n              class="user-avatar create-post-avatar"\n              src="${t.user.avatar}"\n              alt=" ${t.user.name}"\n              onclick="window.location.href='/users/profile/${t.user._id}'"\n              loading="lazy"\n            />\n            \n          \n            <div class="userNameContainer">\n              <a href="/users/profile/${t.user._id}" class="postAuther">\n                ${t.user.name}\n              </a>\n              <span class="postTime"> ${this.printPostDateBefore(t.createdAt)}       </span>\n            </div>\n          </div>\n          <div class="deletePost">\n          <a class="delete-post-button" href="/posts/destroy/${t._id}"\n          ><svg\n            xmlns="http://www.w3.org/2000/svg"\n            width="16"\n            height="16"\n            viewBox="0 0 24 24"\n            fill="none"\n            stroke="currentColor"\n            stroke-width="2"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            class="feather feather-x"\n          >\n            <line x1="18" y1="6" x2="6" y2="18"></line>\n            <line x1="6" y1="6" x2="18" y2="18"></line>\n          </svg>\n        </a>\n          </div>\n        </div>\n        <div class="postContent">${t.content}</div>\n  \n        <div class="postActions">\n          <div class="postLike">\n            <button>\n              <a\n                class="toggle-like-button"\n                data-likes="${t.likes.length}"\n                href="/likes/toggle/?id=${t._id}&type=Post"\n              >\n              \n                <svg\n                  stroke="currentColor"\n                  strokeWidth="2"\n                  fill="none"\n                  strokeLinecap="round"\n                  strokeLinejoin="round"\n                  viewBox="0 0 24 24"\n                >\n                  <path\n                    d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"\n                  ></path>\n                </svg>\n                <span>${t.likes.length}</span>\n              </a>\n            </button>\n          </div>\n  \n          <div class="postCommentsIcon">\n            <img\n              src="https://cdn-icons-png.flaticon.com/512/2190/2190552.png"\n              alt="comments-icon"\n            />\n            <span>${t.comments.length}</span> \n          </div>\n        </div>\n  \n      \n          <form\n            id="post-${t._id}-comments-form"\n            action="/comments/create"\n            method="post"\n          >\n            <div class="postCommentBox">\n              <textarea\n                placeholder="Start typing a comment.."\n                id="comment-input"\n                type="text"\n                name="content"\n                required\n              ></textarea>\n              <div class="PostBtnContainer">\n                <input type="hidden" name="post" value="${t._id}" />\n                <input type="submit" value="Comment" />\n              </div>\n            </div>\n          </form>\n         \n  \n          <div class="postCommentsList">\n            <div id="post-comments-${t._id}">\n            </div>\n          </div> \n  \n          \n      </div>\n    </div>\n  </div>\n  `)},e=function(t){$(t).click((function(n){n.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#post-${t.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))},o=function(){$(".postContainer").each((function(){let t=$(this),n=$(" .delete-post-button",t);e(n);let o=t.prop("id").split("-")[1];new PostComments(o)}))};function printPostDate(){const t=document.querySelectorAll(".postTime");for(let n=0;n<t.length;n++){let e=JSON.stringify(t[n].textContent);e=new Date(e);const o=e.getDate(),s=(e.getMonth(),e.getFullYear()),i=o+" "+e.toLocaleString("default",{month:"short"})+", "+s+" | "+e.toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"});t[n].textContent=i}}function printCommentDate(){const t=document.querySelectorAll(".postCommentTime");for(let n=0;n<t.length;n++){let e=JSON.stringify(t[n].textContent);e=new Date(e);const o=e.getDate(),s=(e.getMonth(),e.getFullYear()),i=o+" "+e.toLocaleString("default",{month:"short"})+", "+s+" | "+e.toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"});t[n].textContent=i}}function printPostDateBefore(t){let n=t;n=new Date(n);const e=n.getDate(),o=n.getFullYear();return e+" "+n.toLocaleString("default",{month:"short"})+", "+o+" | "+n.toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"})}printPostDate(),printCommentDate(),t(),o()}$((function(){$(".peopleContainer").slice(0,4).show(),$("#loadMore").on("click",(function(t){t.preventDefault(),$(".peopleContainer:hidden").slice(0,4).slideDown(),0==$(".peopleContainer:hidden").length&&($("#loadLess").fadeIn("slow"),$("#loadMore").hide()),$("html,body").animate({slideDown:$(this).offset().top},1500)})),$("#loadLess").on("click",(function(t){t.preventDefault(),$(".peopleContainer:not(:lt(4))").fadeOut(),$("#loadMore").fadeIn("slow"),$("#loadLess").hide(),desiredHeight=$(window).height()}))}));